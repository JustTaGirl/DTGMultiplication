<!--
Group Name:DGT Gaming
Group Members:
All members of the Wednesday 8 a.m lab class.
Tianna Dillion - #2205580
Jeremy Grant - #2205728
Anthony Thompson - #2107619
Damani Gordon - #2207420
-->
<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <meta content="noindex">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Home</title>

  

<style>

/*styling for navigation bar*/

ul {

  list-style-type: none;

  margin: 0;

  padding: 0;

  overflow: hidden;

  background-color: #FFAA00;

}



li {

  float: left;

}



li a {

  display: block;

  color: white;

  font-size: 20px;

  text-align: center;

  padding: 14px 16px;

  text-decoration: none;

}



li a:hover {

  background-color: #3581DA;

}



/*styling for paragraph element*/

p{

  font-size:20px;

  color: #CD1D25;

}



/*styling for form container*/

.reg-style {

  border: 1px solid #000;

  border-radius: 2px;

  box-shadow: 0px 2px 2px 0px #000;

  width: fit-content;

  margin: auto;

  padding: 20px;

  display: block;

  max-width: 100%;

}



/*styling for form inside container*/

.reg-style form { 
    
    width: 500px;

    max-width: 100%;

    border: 4px solid #3581D8;

    padding-top: 10px;

    padding-bottom: 10px;

}



/*styling for container title*/

.reg-title{

  text-align: center;

  border: 4px solid #3581D8;

}



/*styling for all input fields except submit button*/

.reg-style input[type="text"], .reg-style input[type="date"], .reg-style input[type="email"], .reg-style input[type="date"], .reg-style input[type="number"], .reg-style #gender{

  background-color: rgba(255, 255, 255, 0.9);

  border: 1px solid #FFAA00;

  display: flex;

  width: 80%;

  height:30px ;

}



/*styling for register button that submits user info to be validated and stored*/

.reg-style input[type="submit" ] {

  width: 200px;

  height: 40px;

  border: 4px solid #3581D8;

  background-color: #FFAA00;

}



/*styling for horizontal line*/

hr{

  display: block;

  margin-left: auto;

  margin-right: auto;

  border-width: 4px;

  border-color:#3581D8;

 }



/*styling for start and end buttons*/

.reg-style button {

    width: 200px;

    height: 40px;

    border: 4px solid #3581D8;

    background-color: #FFAA00;

    cursor: pointer;

}



input[type="submit"] {

cursor: pointer;

}



#PlayArea {

    display: none; /* Initially hide the PlayArea form */

    padding: 15px;

	margin: -8px auto 15px auto;

    background-color: #FFAA00;

    border: 1px solid #f5c6cb;

    color: black;

    border-radius: 5px;

    border-top-right-radius: 0px;

    border-top-left-radius: 0px;

}


        

#PlayArea button{

    width: 200px;

    height: 40px;

    border: 4px solid #CD1D25;

    background-color: #3581D8;

}



#num1, #num2{

      width: 50px;

      height: 40px;

      font-size:100%;

      text-align: center;

}



#userAnswer{

     width: 50px;

     height: 40px;

     font-size:100%;

     text-align:center;

     border: 2px dotted black;

}



#questionNumber {

      font-size: 1.5em;

}



.user-info-style {

    padding-top: 40px;

    display: block;

}


#showpercentage {
  width: 100%;
  height: 200px;
  padding: 12px 20px;
  box-sizing: border-box;
  border: 6px solid #FFAA00;
  border-radius: 4px;
  background-color: #f8f8f8;
  font-size: 16px;
  resize: none;
}

#result {
   display: none;
   padding: 10px;
   border: 1px solid white;
   margin-top: 10px;
}



</style>
</head>

<body>

<!--Navigation bar-->

<ul>

  <li><a class="active" href="index.html">Home</a></li>

  <li><a href="how-to.html">How to Play</a></li>

  <li><a href="about.html">About Us</a></li>

</ul>

<br>

<!--Breif intro-->

<center><p>Are you excited to learn multiplication?</p></center>

<center><p>Get Started by competeing the form below</p></center>
    

<!--Solution to Task1, Collaborative effort between Jeremy Grant and Tianna Dillion-->

            <h1 class="reg-title">Player Information Form</h1>

            <center> <!--centres form-->

            <div class="reg-style">

  

            <!--Registration Form-->

            <form id="registrationForm">

			      <!--Insert Registration Form Data-->

			     <span id="userInfo" class="user-info-style"></span>

			    <!--Form Data Start-->

			     <div id="userData">

                  <!--First Name-->

                  <label for="firstName">First Name:</label>

                  <input type="text" id="firstName" name="first name" placeholder="FirstName" title="First name must be at least 3 characters long"required / ><br>

                  

                  <!--First Name-->

                  <label for="lastName">Last Name:</label>

                  <input type="text" id="lastName" name="last name" placeholder="Lastname" title="Last name must be at least 3 characters long"required /><br>

                  

                  <!-- Date of Birth -->

                  <label for="dob">Date of Birth:</label>

                  <input type="date" id="dob" name="dob" required /><br>



                  <!-- Email address (must end with "@SomeEmail.com") -->

                  <label for="email">Email Address:</label>

                  <input type="email" id="email" name="email" placeholder="Email Address" title="Email must end with '@SomeEmail.com'" required/><br>



                 <!-- Age (calculated from Date of Birth and must be greater than 12) -->

                 <label for="age">Age:</label>

                 <input type="number" id="age" name="age" placeholder="8-12" disabled><br>



                 <!-- Gender -->

                 <label for="gender">Gender:</label>

                 <select id="gender" name="gender" required>

                     <option value="male">Male</option>

                     <option value="female">Female</option>

                     <option value="other">Other</option>

                 </select><br>

                 

                 <input type="submit" value="Register" id='submit' >

				 </div>

				 <!--Form Data End-->

    <br><br>

    <hr>

               

                  <!-- PlayArea form -->

                   <div id="PlayArea">

                       <center>

                       <div>

                          <h5 id="questionNumber"></h5>

                       </div>

					   <div>

                          <h5 id="answerInput"></h5>

                       </div>

                       <p>

                       <label for="num1"></label>

                       <input type="text" id="num1" readonly>

                       &times;

                       <label for="num2"></label>

                       <input type="text" id="num2" readonly>

                       &equals;

                       <label for="userAnswer"></label>

                       <input type="text" id="userAnswer" diabled>

                       </p>

<!--Solution to Task 7- done by Tianna Dillion  -->                       
                       <button id="checkAnswer" type="submit" disabled>Check Answer</button>
                           
<!--Solution to Task 8- done by Tianna Dillion  -->  
                       <button id="next" type="button" disabled>Next</button>

                       </center>

                    </div>

				<button name="Start" type="button" id="start" disabled>Start</button>

                <br><br>

                <div id=result>
<!--Solution to Task 9 display area done by Tianna Dillion-->
                <textarea id="showpercentage" rows="5" cols="2"></textarea>
                </div>

                <br><br>
<!--Solution to Task 11- done by Tianna Dillion  -->  
                <button name="End" type="button" id="end" onclick="findPercentageScore()" disabled>End</button>

                </form>

                </div>
                
                </center>



<script>

        

//Solution to Task 2 - Done by Tianna Dillion, debugged by Jeremy Grant

//Adds an event listener to registration button so that when clicked, calls the register function       
document.getElementById('registrationForm').addEventListener('submit', function(event) {
    event.preventDefault();
    Register(event);
});
        function Register(event)

        {

            // Fetches the input values from the form

            var firstName = document.getElementById('firstName').value.trim();

            var lastName = document.getElementById('lastName').value.trim();

            var dobInput = document.getElementById('dob').value;

            var email = document.getElementById('email').value.trim();

            var ageResult;

            var gender = document.getElementById('gender').value;

            

            

            // Validate First Name

            if (firstName.length < 3)

            {

              alert('First name must be at least 3 characters long.');

              event.preventDefault();

              return false;

            }



           // Validate Last Name

            if (lastName.length < 3)

            {

              alert('Last name must be at least 3 characters long.');

              event.preventDefault();

              return false;

            }

            

          // Validate Email Address

           var emailRegex = /^[\w-]+(\.[\w-]+)*@[a-zA-Z0-9-]+(\.[a-zA-Z]{2,})+$/; // expression that checks for standard email format

           if (!emailRegex.test(email))

           {

              alert('Invalid email format! Please use the format name@someemail.com.');

              event.preventDefault();

              return false;

           }

          

          //Validation Check for Age

            var dob = new Date(dobInput); // Create a Date object from the input value

            var currentDate = new Date(); // Get the current date

            

            var ageResult = currentDate.getFullYear() - dob.getFullYear(); // Calculate the age

            

            // Adjust the age if the birthday hasn't occurred yet this year

            if (currentDate.getMonth() < dob.getMonth() || (currentDate.getMonth() === dob.getMonth() && currentDate.getDate() < dob.getDate()))

            {

                ageResult--;

            }

            

            // Perform age validation

            if (ageResult < 8 || ageResult > 12) {

                // Show an alert if the age is outside the valid range

                alert("Based on your age, you do not qualify to play this game. You must between the ages of 8 and 12 inclusive.");

                event.preventDefault();

                return false;

            }

            

            // Create an object with player information

            var playerInfo = {

                firstName: firstName,

                lastName: lastName,

                dob: dob,

                email: email,

                age: ageResult,

                gender: gender

            };

            // Convert the data to a string and store it in localStorage
           localStorage.setItem('playerRegistrationData', JSON.stringify(playerInfo));

            

//Solution to Task 3 - Done by Tianna Dillion

            var formElements = document.getElementById('userData'); //gets elements from the registration form

            

            for (var i = 0; i < 7; i++) //loops through the everything up to start

            {

			  formElements.style.display = 'block';


            }



           // Loop that enables the 'Start' and 'End' button

            for (var j = 7; j < 10; j++)

            {

			  formElements.style.display = 'none';

			  document.getElementById('start').disabled = false;
                
              var answerTable = ` <table id= 'statsTable' style='display:none; margin-top: 20px; padding: 20px;'></table>`;

            //Code below presents user data back to the user - done by Jeremy Grant
			  document.getElementById('userInfo').innerHTML =  "<div class='fullname'>"+firstName+" "+lastName+"</div><div class='dobinput'><span> DOB: "+dobInput+"</span></div><div class='email'><span>Email Address: "+email+"</span></div><div class='age'><span>Age: "+ageResult+"</span></div><div class='gender'><span> Gender: "+gender+"</span></div><div class='answer-table'>"+answerTable+"</div>";
            

            }

            
           
           event.preventDefault();

        }

        

//Solution to task 5 - Collaborative effort between Tianna Dillion and Jeremy Grant



        // Get references to the button and the PlayArea form

        const startButton = document.getElementById('start');

		const endButton = document.getElementById('end');

        const playAreaForm = document.getElementById('PlayArea');

        let questionCounter = -1;



        // event listens for click of start button that when clicked calls the playgame function

        startButton.addEventListener('click', function () {

        PlayGame();

       // Toggle the visibility of the PlayArea form once playgame function is called

	       playAreaForm.style.display = 'block'; //play area is showing

		   

           if (playAreaForm.style.display === 'none') {   //If the playarea is not showing

			  startButton.disabled = false;    //the start button is enabled 

			  endButton.disabled = true;      //the end button is disbaled

           } else {

              //playArea is showing

			  startButton.disabled = true; //disables the start button

			  endButton.disabled = false; //anables end button once play area is displayed

           }

      });


        

        // Call PlayGame() initially to set the initial values

    PlayGame();

    

    

//Solution to Task 4 - Done by Tianna Dillion

function PlayGame() {

            //keeps count of questions and presents the number in the playArea

            questionCounter++;

            document.getElementById('questionNumber').innerText =`Question ${questionCounter}`;

            // Generate random numbers within the range

            var num1 = Math.floor(Math.random() * 9) + 1;

            var num2 = Math.floor(Math.random() * 5) + 1;



             // Display the numbers in the input fields

             document.getElementById('num1').value = num1;

             document.getElementById('num2').value = num2;

                         
            //Enable input box so user can enter another value
            const answerArea = document.getElementById('userAnswer');
            answerArea.disabled = false;

           //Enables checkAnswer button
           const check = document.getElementById('checkAnswer');
           check.disabled = false;

        }



//Solution to Task 6 - Done by Tianna Dillion debugged by Jeremy Grant
    let correctCount = 0;
    let incorrectCount = 0;
    let incorrectQuestions = []; //initializez array to store incorrect questions

//check answer process, event listener for when check answert button is clicked
    document.getElementById('checkAnswer').addEventListener('click', function (event) {
            event.preventDefault();	

//gets values from play area
            var num1 = parseInt(document.getElementById('num1').value);

            var num2 = parseInt(document.getElementById('num2').value);

			var userAnswer = parseInt(document.getElementById('userAnswer').value);


            // Validate user input

            if (isNaN(userAnswer)) //if the user input is not a number

            {
                alert('Please enter a valid number.');

                return false;
            }


        // Enable the "Next" button after checking the answer so user has to check answer before moving to next question so code can validate and store results
        document.getElementById('next').disabled = false;
        
            var isCorrect = userAnswer === num1 * num2; //calculates correct answer
 

//Change border color based on the correctness of the answer   
           var isCorrect = userAnswer === num1 * num2;
           var userAnswerBorder = document.getElementById('userAnswer');

		   if(isCorrect === false) { 

		    userAnswerBorder.style.border = '6px solid #FF000D';
            incorrectCount++; //counts the number of questions user got incorrect
            // Store the incorrect question in the array
            incorrectQuestions.push(`${num1} * ${num2}`);

		   }else{

		    userAnswerBorder.style.border = '6px solid #AAF464'; 
            correctCount++; //counts the number of questions user got correct

		   }

        
//creates object for user's progress as game is played
          playerProgress ={

              question: `${num1} * ${num2}`, //equation

              userResponse: userAnswer, //response

              correctAnswersCount: correctCount, //stores the number of questions user got correct
              
              incorrectAnswersCount: incorrectCount, //stores the number of questions user got incorrect

              incorrectQuestions: incorrectQuestions //stores the exact equations user got incorrect

            };
        
        // Retrieve player info from localStorage
        let storedPlayerData = JSON.parse(localStorage.getItem('playerRegistrationData'));

        // Update game progress in the stored player data
        storedPlayerData.playerProgress = playerProgress;

        // Store updated player data back to localStorage
       localStorage.setItem('playerRegistrationData', JSON.stringify(storedPlayerData));


       //Disabled input box so user cannot enter another value after checking answer
       var userAnswerArea = document.getElementById('userAnswer');
       userAnswerArea.disabled = true;

       //Disables checkAnswer button after checking answer
       const checkAns = document.getElementById('checkAnswer');
       checkAns.disabled = true;

     });
        


    //Next Button

	 document.getElementById('next').addEventListener('click', function (event) {

	    event.preventDefault();	

        document.getElementById('userAnswer').value = '';		

		document.getElementById('userAnswer').removeAttribute('style');

		PlayGame();

        document.getElementById('next').disabled = true;  

        return false;

	})

//Solution to Task 10- done by Tianna Dillion
function findPercentageScore() {
    const showPercentageTextarea = document.getElementById('showpercentage');
    
    // Clear the textarea before displaying new information
    showPercentageTextarea.value = '';
    
    // Retrieve player data from localStorage
    const storedPlayerData = JSON.parse(localStorage.getItem('playerRegistrationData'));

    if (storedPlayerData && storedPlayerData.playerProgress) {
        const { firstName, lastName } = storedPlayerData;
        const { correctAnswersCount, incorrectAnswersCount } = storedPlayerData.playerProgress;

        //Disable End Button 
        document.getElementById("end").disabled = true;

        // Retrieve incorrect questions from localStorage
        const incorrectQuestions = storedPlayerData.playerProgress.incorrectQuestions || [];

        // Calculate percentage score
        const totalQuestions = correctAnswersCount + incorrectAnswersCount;
        const percentageScore = (correctAnswersCount / totalQuestions) * 100 || 0;

        // Display the information
        const displayInfo = 
            `Player: ${firstName} ${lastName}\n
            No. of Correct Answers: ${correctAnswersCount}\n
            No. of Incorrect Answers: ${incorrectAnswersCount}\n
            Questions you got Incorrect:\n${incorrectQuestions.map(question => `[${question}]`).join(' , ')}\n
            Percentage Score: ${percentageScore.toFixed(2)}%\n`;

        showPercentageTextarea.value = displayInfo;
    } else {
        showPercentageTextarea.value = 'No player data available.';
    }

    showResult();
}


function showResult() {
            const resultDiv = document.getElementById('result');
            resultDiv.style.display = 'block';

            // Set a timer to hide the result after 20 seconds
            setTimeout(function () {
                resultDiv.style.display = 'none';
                endGame();
            }, 15000); // 15 seconds
        }
    
//Solution to Task 11- done by Tianna Dillion debugged by Jeremy Grant
function endGame() {
    // Clear registration form
     document.getElementById('registrationForm').reset();

    // Enable form fields except for age
    const formFields = document.querySelectorAll('#userData input, #userData select');
    formFields.forEach(field => {
        if (field.id !== 'age') {
            field.disabled = false;
        }
    });

    // Disable all buttons except for registration
    const buttons = document.querySelectorAll('button');
    buttons.forEach(button => {
        if (button.id !== 'submit') {
            button.disabled = true;
        }
    });

    // Disable the play area
    document.getElementById('PlayArea').style.display = 'none';

     //Show registration form after clicking end button
     document.getElementById('userData').style.display = "block";

    //Clear the content in display div
    document.getElementById("userInfo").innerHTML = "";
}

    

</script>



</body>

</html>